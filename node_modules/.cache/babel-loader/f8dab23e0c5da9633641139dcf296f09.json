{"ast":null,"code":"import _toConsumableArray from\"/Users/cash/dev/stackline/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/cash/dev/stackline/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import\"../styles/productSales.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DEFAULT_SORT={key:'weekEnding',direction:'DESC'};var usdFormatter=new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:0});function getSaleComparator(_ref){var key=_ref.key,direction=_ref.direction;if(key==='weekEnding'){var compareDate=function compareDate(saleA,saleB){var dateA=new Date(saleA[key]),dateB=new Date(saleB[key]);if(dateA<dateB){return-1;}else if(dateA>dateB){return 1;}else{return 0;}};var inversedCompareDate=function inversedCompareDate(a,b){return-1*compareDate(a,b);};return direction==='ASC'?compareDate:inversedCompareDate;}else{var compareNumber=function compareNumber(saleA,saleB){return saleA[key]-saleB[key];};var inversedCompareNumber=function inversedCompareNumber(a,b){return-1*compareNumber(a,b);};return direction==='ASC'?compareNumber:inversedCompareNumber;}}export default function ProductSalesTable(_ref2){var sales=_ref2.sales;var _useState=useState(DEFAULT_SORT),_useState2=_slicedToArray(_useState,2),sort=_useState2[0],setSort=_useState2[1];var updateSort=function updateSort(key){if(sort.key===key){setSort({key:key,direction:sort.direction==='ASC'?'DESC':'ASC'});}else{setSort({key:key,direction:DEFAULT_SORT.direction});}};var sorted=_toConsumableArray(sales).sort(getSaleComparator(sort));return/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:sort.direction==='ASC'?'Ascending':'Descending',children:[/*#__PURE__*/_jsx(\"th\",{className:sort.key==='weekEnding'?'Sorted':'',onClick:function onClick(){return updateSort('weekEnding');},scope:\"col\",children:\"WEEK ENDING\"}),/*#__PURE__*/_jsx(\"th\",{className:sort.key==='retailSales'?'Sorted':'',onClick:function onClick(){return updateSort('retailSales');},scope:\"col\",children:\"RETAIL SALES\"}),/*#__PURE__*/_jsx(\"th\",{className:sort.key==='wholesaleSales'?'Sorted':'',onClick:function onClick(){return updateSort('wholesaleSales');},scope:\"col\",children:\"WHOLESALE SALES\"}),/*#__PURE__*/_jsx(\"th\",{className:sort.key==='unitsSold'?'Sorted':'',onClick:function onClick(){return updateSort('unitsSold');},scope:\"col\",children:\"UNITS SOLD\"}),/*#__PURE__*/_jsx(\"th\",{className:sort.key==='retailerMargin'?'Sorted':'',onClick:function onClick(){return updateSort('retailerMargin');},scope:\"col\",children:\"RETAILER MARGIN\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sorted.map(function(sale,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:sale.weekEnding}),/*#__PURE__*/_jsx(\"td\",{children:usdFormatter.format(sale.retailSales)}),/*#__PURE__*/_jsx(\"td\",{children:usdFormatter.format(sale.wholesaleSales)}),/*#__PURE__*/_jsx(\"td\",{children:sale.unitsSold}),/*#__PURE__*/_jsx(\"td\",{children:usdFormatter.format(sale.retailerMargin)})]},\"sale-\".concat(index));})})]});}","map":{"version":3,"sources":["/Users/cash/dev/stackline/src/features/products/components/ProductSalesTable.tsx"],"names":["useState","DEFAULT_SORT","key","direction","usdFormatter","Intl","NumberFormat","style","currency","minimumFractionDigits","getSaleComparator","compareDate","saleA","saleB","dateA","Date","dateB","inversedCompareDate","a","b","compareNumber","inversedCompareNumber","ProductSalesTable","sales","sort","setSort","updateSort","sorted","map","sale","index","weekEnding","format","retailSales","wholesaleSales","unitsSold","retailerMargin"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { ProductSaleModel } from \"../api/productModels\";\nimport \"../styles/productSales.css\"\n\nexport interface ProductSalesTableProps {\n  readonly sales: ProductSaleModel[];\n}\n\ninterface Sort {\n  key: keyof ProductSaleModel;\n  direction: 'ASC' | 'DESC';\n}\n\nconst DEFAULT_SORT: Sort = {\n  key: 'weekEnding',\n  direction: 'DESC'\n};\n\nconst usdFormatter = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n  minimumFractionDigits: 0\n})\n\nfunction getSaleComparator({ key, direction }: Sort): (a: ProductSaleModel, b: ProductSaleModel) => number {\n  if (key === 'weekEnding') {\n    const compareDate = (saleA: ProductSaleModel, saleB: ProductSaleModel) => {\n      const [dateA, dateB] = [new Date(saleA[key]), new Date(saleB[key])];\n      if (dateA < dateB) {\n        return -1;\n      } else if (dateA > dateB) {\n        return 1;\n      } else {\n        return 0;\n      }\n    }\n    const inversedCompareDate = (a: ProductSaleModel, b: ProductSaleModel) => (-1 * compareDate(a, b));\n    return direction === 'ASC' ? compareDate : inversedCompareDate;\n  } else {\n    const compareNumber = (saleA: ProductSaleModel, saleB: ProductSaleModel) => {\n      return saleA[key] - saleB[key];\n    }\n    const inversedCompareNumber = (a: ProductSaleModel, b: ProductSaleModel) => (-1 * compareNumber(a, b));\n    return direction === 'ASC' ? compareNumber : inversedCompareNumber;\n  }\n}\n\nexport default function ProductSalesTable({ sales }: ProductSalesTableProps) {\n  const [sort, setSort] = useState<Sort>(DEFAULT_SORT);\n\n  const updateSort = function(key: keyof ProductSaleModel) {\n    if (sort.key === key) {\n      setSort({\n        key: key,\n        direction: sort.direction === 'ASC' ? 'DESC' : 'ASC'\n      });\n    } else {\n      setSort({\n        key: key,\n        direction: DEFAULT_SORT.direction\n      });\n    }\n  }\n\n  const sorted = [...sales].sort(getSaleComparator(sort));\n\n  return (\n    <table>\n      <thead>\n        <tr className={sort.direction === 'ASC' ? 'Ascending' : 'Descending'}>\n          <th className={sort.key === 'weekEnding' ? 'Sorted' : ''} onClick={() => updateSort('weekEnding')} scope=\"col\">WEEK ENDING</th>\n          <th className={sort.key === 'retailSales' ? 'Sorted' : ''} onClick={() => updateSort('retailSales')} scope=\"col\">RETAIL SALES</th>\n          <th className={sort.key === 'wholesaleSales' ? 'Sorted' : ''} onClick={() => updateSort('wholesaleSales')} scope=\"col\">WHOLESALE SALES</th>\n          <th className={sort.key === 'unitsSold' ? 'Sorted' : ''} onClick={() => updateSort('unitsSold')} scope=\"col\">UNITS SOLD</th>\n          <th className={sort.key === 'retailerMargin' ? 'Sorted' : ''} onClick={() => updateSort('retailerMargin')} scope=\"col\">RETAILER MARGIN</th>\n        </tr>\n      </thead>\n      <tbody>\n        { sorted.map((sale, index) => (\n          <tr key={`sale-${index}`}>\n            <td>{ sale.weekEnding }</td>\n            <td>{ usdFormatter.format(sale.retailSales) }</td>\n            <td>{ usdFormatter.format(sale.wholesaleSales) }</td>\n            <td>{ sale.unitsSold }</td>\n            <td>{ usdFormatter.format(sale.retailerMargin) }</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n}"]},"metadata":{},"sourceType":"module"}